<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keys.so Spy - –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-section { background: white; padding: 20px; margin: 10px 0; border-radius: 10px; }
        .result { margin: 5px 0; padding: 8px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        .btn { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .btn:hover { background: #0056b3; }
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #218838; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Keys.so Spy - –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å"</h1>
        
        <div class="test-section">
            <h2>üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
            <div id="mainPageCheck"></div>
            <button class="btn btn-success" onclick="checkMainPage()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
        </div>
        
        <div class="test-section">
            <h2>üîß –¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
            <div id="buttonTest"></div>
            <button class="btn" onclick="testButtonRealTime()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É</button>
        </div>
        
        <div class="test-section">
            <h2>üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π</h2>
            <div id="versionCompare"></div>
            <a href="index.html" class="btn">–ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è</a>
            <a href="simple.html" class="btn">–ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è</a>
        </div>
    </div>

    <script>
        function addResult(containerId, message, type = 'info') {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.textContent = message;
            container.appendChild(div);
        }

        function clearResults(containerId) {
            document.getElementById(containerId).innerHTML = '';
        }

        function checkMainPage() {
            clearResults('mainPageCheck');
            addResult('mainPageCheck', 'üéØ –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É...', 'info');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            fetch('index.html')
                .then(response => {
                    if (response.ok) {
                        addResult('mainPageCheck', '‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞', 'success');
                        return response.text();
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                })
                .then(html => {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ HTML
                    if (html.includes('addDomainBtn')) {
                        addResult('mainPageCheck', '‚úÖ –ö–Ω–æ–ø–∫–∞ addDomainBtn –Ω–∞–π–¥–µ–Ω–∞ –≤ HTML', 'success');
                    } else {
                        addResult('mainPageCheck', '‚ùå –ö–Ω–æ–ø–∫–∞ addDomainBtn –ù–ï –Ω–∞–π–¥–µ–Ω–∞ –≤ HTML', 'error');
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
                    if (html.includes('addEventListener')) {
                        addResult('mainPageCheck', '‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞–π–¥–µ–Ω—ã –≤ HTML', 'success');
                    } else {
                        addResult('mainPageCheck', '‚ùå –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –ù–ï –Ω–∞–π–¥–µ–Ω—ã –≤ HTML', 'error');
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    if (html.includes('domainModal')) {
                        addResult('mainPageCheck', '‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–π–¥–µ–Ω–æ –≤ HTML', 'success');
                    } else {
                        addResult('mainPageCheck', '‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ù–ï –Ω–∞–π–¥–µ–Ω–æ –≤ HTML', 'error');
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª–µ–π
                    const moduleScripts = [
                        'assets/js/utils.js',
                        'classes/DomainManager/DomainStorage.js',
                        'classes/DomainManager/DomainUI.js',
                        'classes/DomainManager/DomainManager.js'
                    ];
                    
                    let modulesFound = 0;
                    moduleScripts.forEach(script => {
                        if (html.includes(script)) {
                            modulesFound++;
                        }
                    });
                    
                    addResult('mainPageCheck', `‚úÖ –ú–æ–¥—É–ª–∏ –≤ HTML: ${modulesFound}/${moduleScripts.length}`, 'success');
                    
                    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                    if (html.includes('addDomainBtn') && html.includes('addEventListener')) {
                        addResult('mainPageCheck', 'üéØ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!', 'success');
                        addResult('mainPageCheck', 'üí° –û—Ç–∫—Ä–æ–π—Ç–µ https://zhar-svet.com/Spy/index.html –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫—É', 'info');
                    } else {
                        addResult('mainPageCheck', '‚ö†Ô∏è –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π', 'error');
                    }
                })
                .catch(error => {
                    addResult('mainPageCheck', `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã: ${error.message}`, 'error');
                });
        }

        function testButtonRealTime() {
            clearResults('buttonTest');
            addResult('buttonTest', 'üîß –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏...', 'info');
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
            const testWindow = window.open('index.html', '_blank', 'width=1200,height=800');
            
            if (!testWindow) {
                addResult('buttonTest', '‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤–æ–µ –æ–∫–Ω–æ (–≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ)', 'error');
                return;
            }
            
            testWindow.addEventListener('load', function() {
                addResult('buttonTest', '‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ', 'success');
                
                try {
                    // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
                    setTimeout(() => {
                        const addBtn = testWindow.document.getElementById('addDomainBtn');
                        
                        if (addBtn) {
                            addResult('buttonTest', '‚úÖ –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" –Ω–∞–π–¥–µ–Ω–∞', 'success');
                            
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
                            const rect = addBtn.getBoundingClientRect();
                            const isVisible = rect.width > 0 && rect.height > 0;
                            addResult('buttonTest', `‚úÖ –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∏–º–∞: ${isVisible}`, 'success');
                            
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∏–ª–∏
                            const styles = testWindow.getComputedStyle(addBtn);
                            addResult('buttonTest', `‚úÖ –°—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã: ${styles.backgroundColor !== ''}`, 'success');
                            
                            // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–ª–∏–∫
                            addBtn.click();
                            addResult('buttonTest', '‚úÖ –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
                            
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                            setTimeout(() => {
                                const modal = testWindow.document.getElementById('domainModal');
                                if (modal) {
                                    const isModalOpen = modal.classList.contains('active');
                                    if (isModalOpen) {
                                        addResult('buttonTest', 'üéâ –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –û–¢–ö–†–´–õ–û–°–¨! –ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!', 'success');
                                    } else {
                                        addResult('buttonTest', '‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ù–ï –æ—Ç–∫—Ä—ã–ª–æ—Å—å', 'error');
                                        addResult('buttonTest', 'üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏', 'info');
                                    }
                                } else {
                                    addResult('buttonTest', '‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ù–ï –Ω–∞–π–¥–µ–Ω–æ', 'error');
                                }
                            }, 200);
                            
                        } else {
                            addResult('buttonTest', '‚ùå –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" –ù–ï –Ω–∞–π–¥–µ–Ω–∞', 'error');
                        }
                    }, 2000); // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
                    
                } catch (error) {
                    addResult('buttonTest', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${error.message}`, 'error');
                }
            });
            
            testWindow.addEventListener('error', function(e) {
                addResult('buttonTest', `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${e.message}`, 'error');
            });
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫
        document.addEventListener('DOMContentLoaded', function() {
            addResult('mainPageCheck', 'üéØ –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã', 'info');
            addResult('buttonTest', 'üîß –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∫–Ω–æ–ø–∫–∏', 'info');
            addResult('versionCompare', 'üìä –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', 'info');
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            setTimeout(checkMainPage, 1000);
        });
    </script>
</body>
</html>
