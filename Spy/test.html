<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keys.so Spy - –¢–µ—Å—Ç –º–æ–¥—É–ª–µ–π</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>üîç Keys.so Spy - –¢–µ—Å—Ç –º–æ–¥—É–ª–µ–π</h1>
    <div id="testResults"></div>

    <!-- JavaScript –º–æ–¥—É–ª–∏ -->
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/api.js"></script>
    <script src="classes/DomainManager/DomainStorage.js"></script>
    <script src="classes/DomainManager/DomainUI.js"></script>
    <script src="classes/DomainManager/DomainManager.js"></script>
    <script src="classes/Shared/TabManager.js"></script>
    <script src="classes/Shared/ExportManager.js"></script>
    <script src="classes/Shared/NotificationManager.js"></script>
    <script src="classes/Overview/OverviewTab.js"></script>
    <script src="classes/Keywords/KeywordsTab.js"></script>

    <script>
        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
        function addTestResult(message, type = 'info') {
            const resultsDiv = document.getElementById('testResults');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            resultsDiv.appendChild(div);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
        function testModuleLoading() {
            addTestResult('üß™ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π...', 'info');
            
            const modules = [
                { name: 'Utils', class: Utils },
                { name: 'DomainStorage', class: DomainStorage },
                { name: 'DomainUI', class: DomainUI },
                { name: 'DomainManager', class: DomainManager },
                { name: 'TabManager', class: TabManager },
                { name: 'ExportManager', class: ExportManager },
                { name: 'NotificationManager', class: NotificationManager },
                { name: 'OverviewTab', class: OverviewTab },
                { name: 'KeywordsTab', class: KeywordsTab }
            ];

            let successCount = 0;
            let errorCount = 0;

            modules.forEach(module => {
                if (typeof module.class !== 'undefined') {
                    addTestResult(`‚úÖ ${module.name} - –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ`, 'success');
                    successCount++;
                } else {
                    addTestResult(`‚ùå ${module.name} - –ù–ï –ó–ê–ì–†–£–ñ–ï–ù`, 'error');
                    errorCount++;
                }
            });

            addTestResult(`üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: ${successCount} —É—Å–ø–µ—à–Ω–æ, ${errorCount} –æ—à–∏–±–æ–∫`, 
                         errorCount === 0 ? 'success' : 'error');
        }

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
        function testInstanceCreation() {
            addTestResult('üîß –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤...', 'info');
            
            try {
                // –¢–µ—Å—Ç Utils (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å)
                if (typeof Utils !== 'undefined') {
                    const testNumber = Utils.formatNumber(1234567);
                    addTestResult(`‚úÖ Utils.formatNumber —Ä–∞–±–æ—Ç–∞–µ—Ç: ${testNumber}`, 'success');
                }

                // –¢–µ—Å—Ç DomainStorage
                if (typeof DomainStorage !== 'undefined') {
                    const storage = new DomainStorage('test_key');
                    addTestResult('‚úÖ DomainStorage —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
                }

                // –¢–µ—Å—Ç DomainUI
                if (typeof DomainUI !== 'undefined') {
                    const domainUI = new DomainUI();
                    addTestResult('‚úÖ DomainUI —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
                }

                // –¢–µ—Å—Ç NotificationManager (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–º)
                if (typeof notificationManager !== 'undefined') {
                    addTestResult('‚úÖ notificationManager –¥–æ—Å—Ç—É–ø–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ', 'success');
                } else {
                    addTestResult('‚ùå notificationManager –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ', 'error');
                }

                // –¢–µ—Å—Ç OverviewTab
                if (typeof OverviewTab !== 'undefined') {
                    const overviewTab = new OverviewTab();
                    addTestResult('‚úÖ OverviewTab —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
                }

                // –¢–µ—Å—Ç KeywordsTab
                if (typeof KeywordsTab !== 'undefined') {
                    const keywordsTab = new KeywordsTab();
                    addTestResult('‚úÖ KeywordsTab —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
                }

            } catch (error) {
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤: ${error.message}`, 'error');
            }
        }

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
        function testFunctionality() {
            addTestResult('‚öôÔ∏è –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å...', 'info');
            
            try {
                // –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
                if (typeof notificationManager !== 'undefined') {
                    notificationManager.success('–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ');
                    addTestResult('‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                }

                // –¢–µ—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                if (typeof Utils !== 'undefined') {
                    const formatted = Utils.formatNumber(1234567);
                    if (formatted === '1 234 567') {
                        addTestResult('‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    } else {
                        addTestResult(`‚ùå –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${formatted}`, 'error');
                    }
                }

                // –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–æ–≤
                if (typeof Utils !== 'undefined') {
                    const isValid = Utils.isValidDomain('example.com');
                    const isInvalid = Utils.isValidDomain('invalid..domain');
                    if (isValid && !isInvalid) {
                        addTestResult('‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    } else {
                        addTestResult('‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç', 'error');
                    }
                }

            } catch (error) {
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏: ${error.message}`, 'error');
            }
        }

        // –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
        document.addEventListener('DOMContentLoaded', function() {
            addTestResult('üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –º–æ–¥—É–ª–µ–π Keys.so Spy', 'info');
            
            setTimeout(() => {
                testModuleLoading();
                
                setTimeout(() => {
                    testInstanceCreation();
                    
                    setTimeout(() => {
                        testFunctionality();
                        addTestResult('üèÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!', 'info');
                    }, 500);
                }, 500);
            }, 100);
        });
    </script>
</body>
</html>
