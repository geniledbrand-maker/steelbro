<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #d32f2f;
            border-bottom: 3px solid #d32f2f;
            padding-bottom: 10px;
        }
        .test-section {
            background: #e3f2fd;
            border: 2px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #1976d2;
        }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #2196F3;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .log {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
            margin: 10px 0;
        }
        .log-error {
            color: #ef5350;
        }
        .log-success {
            color: #66bb6a;
        }
        .log-info {
            color: #42a5f5;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>üî• –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ü–æ—á–µ–º—É –Ω–æ–≤—ã–µ –∏–∑–¥–µ–ª–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è</h1>

    <div class="warning">
        <strong>‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê:</strong> –ö–æ–≥–¥–∞ —è –¥–æ–±–∞–≤–ª—è—é –ù–û–í–û–ï –∏–∑–¥–µ–ª–∏–µ, –æ–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ,
        –Ω–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ò–°–ß–ï–ó–ê–ï–¢!
    </div>

    <div class="test-section">
        <h2>üß™ –¢–ï–°–¢ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ API –Ω–∞–ø—Ä—è–º—É—é</h2>
        <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –Ω–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ –Ω–∞–ø—Ä—è–º—É—é –≤ API, –º–∏–Ω—É—è –≤–∞—à –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
        <button onclick="testAPIDirectly()">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç API</button>
        <div id="test1-result"></div>
    </div>

    <div class="test-section">
        <h2>üîç –¢–ï–°–¢ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö</h2>
        <p>–ó–∞–≥—Ä—É–∑–∏–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–∫–∞–∂–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É.</p>
        <button onclick="checkCurrentData()">‚ñ∂Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        <div id="test2-result"></div>
    </div>

    <div class="test-section">
        <h2>üì° –¢–ï–°–¢ 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
        <p>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Network) –∏ –¥–æ–±–∞–≤—å—Ç–µ –∏–∑–¥–µ–ª–∏–µ –≤ –≤–∞—à–µ–π –ø–∞–Ω–µ–ª–∏.</p>
        <p>–ó–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.</p>
        <button onclick="showNetworkInstructions()">üìñ –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</button>
        <div id="test3-result"></div>
    </div>

    <div class="test-section">
        <h2>üîß –¢–ï–°–¢ 4: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</h2>
        <p>–°–∏–º—É–ª–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞</p>
        <button onclick="fullCycleTest()">‚ñ∂Ô∏è –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
        <div id="test4-result"></div>
    </div>

    <h2>üìã –õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
    <div class="log" id="log"></div>
</div>

<script>
    const log = (message, type = 'info') => {
        const logDiv = document.getElementById('log');
        const timestamp = new Date().toLocaleTimeString();
        const className = type === 'error' ? 'log-error' : type === 'success' ? 'log-success' : 'log-info';
        logDiv.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
        logDiv.scrollTop = logDiv.scrollHeight;
        console.log(message);
    };

    // –¢–ï–°–¢ 1: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API
    async function testAPIDirectly() {
        const resultDiv = document.getElementById('test1-result');
        resultDiv.innerHTML = '<p>‚è≥ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...</p>';
        log('üß™ –¢–ï–°–¢ 1: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API', 'info');

        const testProduct = {
            name: '–î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ô_–¢–ï–°–¢_' + Date.now(),
            complexity: '–ü—Ä–æ—Å—Ç–∞—è',
            margin: '–°—Ä–µ–¥–Ω—è—è',
            demand: '–°—Ä–µ–¥–Ω–∏–π',
            time: '1 —á–∞—Å'
        };

        log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º: ' + JSON.stringify(testProduct), 'info');

        try {
            const response = await fetch('save_data.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    add_custom_product: testProduct
                })
            });

            log('üì° –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω. –°—Ç–∞—Ç—É—Å: ' + response.status, 'info');

            const data = await response.json();
            log('üì• –î–∞–Ω–Ω—ã–µ: ' + JSON.stringify(data), data.success ? 'success' : 'error');

            if (data.success) {
                resultDiv.innerHTML = `
                        <div class="success">
                            <strong>‚úÖ API –†–ê–ë–û–¢–ê–ï–¢!</strong><br>
                            –ò–∑–¥–µ–ª–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ: <strong>${testProduct.name}</strong><br>
                            –í—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ${data.timestamp}<br><br>
                            <strong>–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∏–º, —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –ª–∏ –æ–Ω–æ...</strong>
                        </div>
                    `;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å
                setTimeout(async () => {
                    const checkResponse = await fetch('save_data.php');
                    const checkData = await checkResponse.json();

                    const found = checkData.selected_products.includes(testProduct.name);
                    const foundInCustom = checkData.custom_products.some(p => p.name === testProduct.name);

                    if (found && foundInCustom) {
                        resultDiv.innerHTML += `
                                <div class="success">
                                    <strong>‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û!</strong><br>
                                    –ò–∑–¥–µ–ª–∏–µ –Ω–∞–π–¥–µ–Ω–æ –≤:<br>
                                    ‚Ä¢ selected_products: ‚úÖ<br>
                                    ‚Ä¢ custom_products: ‚úÖ<br><br>
                                    <strong>API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100%!</strong><br>
                                    –ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏!
                                </div>
                            `;
                        log('‚úÖ –ò–∑–¥–µ–ª–∏–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –æ–±–æ–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö', 'success');
                    } else {
                        resultDiv.innerHTML += `
                                <div class="error">
                                    <strong>‚ùå –ü–†–û–ë–õ–ï–ú–ê!</strong><br>
                                    –ò–∑–¥–µ–ª–∏–µ –ù–ï –Ω–∞–π–¥–µ–Ω–æ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:<br>
                                    ‚Ä¢ selected_products: ${found ? '‚úÖ' : '‚ùå'}<br>
                                    ‚Ä¢ custom_products: ${foundInCustom ? '‚úÖ' : '‚ùå'}
                                </div>
                            `;
                        log('‚ùå –ò–∑–¥–µ–ª–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
                    }
                }, 500);

            } else {
                resultDiv.innerHTML = `
                        <div class="error">
                            <strong>‚ùå –û–®–ò–ë–ö–ê API!</strong><br>
                            ${data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}
                        </div>
                    `;
                log('‚ùå –û—à–∏–±–∫–∞ API: ' + (data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è'), 'error');
            }

        } catch (error) {
            resultDiv.innerHTML = `
                    <div class="error">
                        <strong>‚ùå –û–®–ò–ë–ö–ê –°–ï–¢–ò!</strong><br>
                        ${error.message}
                    </div>
                `;
            log('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message, 'error');
        }
    }

    // –¢–ï–°–¢ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
    async function checkCurrentData() {
        const resultDiv = document.getElementById('test2-result');
        resultDiv.innerHTML = '<p>‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º...</p>';
        log('üîç –¢–ï–°–¢ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö', 'info');

        try {
            const response = await fetch('save_data.php');
            const data = await response.json();

            log('üì• –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã', 'success');

            resultDiv.innerHTML = `
                    <div class="success">
                        <h3>üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:</h3>
                        <strong>selected_products:</strong> ${data.selected_products.length} –∏–∑–¥–µ–ª–∏–π<br>
                        <strong>custom_products:</strong> ${data.custom_products.length} –∏–∑–¥–µ–ª–∏–π<br>
                        <strong>deleted_products:</strong> ${data.deleted_products.length} –∏–∑–¥–µ–ª–∏–π<br>
                        <strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> ${data.last_updated}<br><br>

                        <h4>–°–ø–∏—Å–æ–∫ selected_products:</h4>
                        <pre>${JSON.stringify(data.selected_products, null, 2)}</pre>

                        <h4>–°–ø–∏—Å–æ–∫ custom_products:</h4>
                        <pre>${JSON.stringify(data.custom_products, null, 2)}</pre>
                    </div>
                `;

        } catch (error) {
            resultDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message, 'error');
        }
    }

    // –¢–ï–°–¢ 3: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É
    function showNetworkInstructions() {
        const resultDiv = document.getElementById('test3-result');
        log('üì° –¢–ï–°–¢ 3: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É', 'info');

        resultDiv.innerHTML = `
                <div class="warning">
                    <h3>üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
                    <ol style="text-align: left;">
                        <li><strong>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞</strong> (F12)</li>
                        <li><strong>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Network (–°–µ—Ç—å)</strong></li>
                        <li><strong>–ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É "Preserve log"</strong></li>
                        <li><strong>–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É –ø–∞–Ω–µ–ª—å Analyticssb –≤ –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ</strong></li>
                        <li><strong>–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ</strong></li>
                        <li><strong>–ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"</strong></li>
                        <li><strong>–í –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ save_data.php</strong></li>
                        <li><strong>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:</strong>
                            <ul>
                                <li>Request Method (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å POST)</li>
                                <li>Request Payload (—á—Ç–æ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)</li>
                                <li>Response (—á—Ç–æ –≤–µ—Ä–Ω—É–ª —Å–µ—Ä–≤–µ—Ä)</li>
                            </ul>
                        </li>
                        <li><strong>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ</strong></li>
                    </ol>

                    <h4>‚ùì –ß—Ç–æ –∏—Å–∫–∞—Ç—å:</h4>
                    <ul style="text-align: left;">
                        <li>–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ <code>add_custom_product</code>?</li>
                        <li>–ò–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è <code>selected_products</code> –∏ <code>custom_products</code>?</li>
                        <li>–ï—Å—Ç—å –ª–∏ –≤ –æ—Ç–≤–µ—Ç–µ <code>success: true</code>?</li>
                    </ul>
                </div>
            `;
    }

    // –¢–ï–°–¢ 4: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª
    async function fullCycleTest() {
        const resultDiv = document.getElementById('test4-result');
        resultDiv.innerHTML = '<p>‚è≥ –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª...</p>';
        log('üîß –¢–ï–°–¢ 4: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'info');

        const testName = '–ü–û–õ–ù–´–ô_–¢–ï–°–¢_' + Date.now();

        try {
            // –®–∞–≥ 1: –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ
            log('üì• –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö', 'info');
            const loadResponse = await fetch('save_data.php');
            const initialData = await loadResponse.json();

            const initialCount = initialData.selected_products.length;
            log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ. –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${initialCount}`, 'success');

            // –®–∞–≥ 2: –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ
            log('üì§ –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–∑–¥–µ–ª–∏—è', 'info');
            const addResponse = await fetch('save_data.php', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    add_custom_product: {
                        name: testName,
                        complexity: '–¢–µ—Å—Ç–æ–≤–∞—è',
                        margin: '–¢–µ—Å—Ç–æ–≤–∞—è',
                        demand: '–¢–µ—Å—Ç–æ–≤—ã–π',
                        time: '0 –º–∏–Ω—É—Ç'
                    }
                })
            });

            const addResult = await addResponse.json();
            log('–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: ' + JSON.stringify(addResult), addResult.success ? 'success' : 'error');

            if (!addResult.success) {
                resultDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞ –Ω–∞ —à–∞–≥–µ 2: ${addResult.error}</div>`;
                return;
            }

            // –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            log('üîÑ –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö', 'info');
            await new Promise(resolve => setTimeout(resolve, 500));

            const reloadResponse = await fetch('save_data.php');
            const reloadedData = await reloadResponse.json();

            const newCount = reloadedData.selected_products.length;
            log(`‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–æ. –ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${newCount}`, 'success');

            // –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ
            const foundInSelected = reloadedData.selected_products.includes(testName);
            const foundInCustom = reloadedData.custom_products.some(p => p.name === testName);

            log(`üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è: selected=${foundInSelected}, custom=${foundInCustom}`, 'info');

            // –†–µ–∑—É–ª—å—Ç–∞—Ç
            if (foundInSelected && foundInCustom) {
                resultDiv.innerHTML = `
                        <div class="success">
                            <h3>‚úÖ –ü–û–õ–ù–´–ô –£–°–ü–ï–•!</h3>
                            <p><strong>–í–µ—Å—å —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ:</strong></p>
                            <ul style="text-align: left;">
                                <li>–ë—ã–ª–æ –∏–∑–¥–µ–ª–∏–π: ${initialCount}</li>
                                <li>–°—Ç–∞–ª–æ –∏–∑–¥–µ–ª–∏–π: ${newCount}</li>
                                <li>–î–æ–±–∞–≤–ª–µ–Ω–æ: ${newCount - initialCount}</li>
                                <li>–ò–∑–¥–µ–ª–∏–µ –≤ selected_products: ‚úÖ</li>
                                <li>–ò–∑–¥–µ–ª–∏–µ –≤ custom_products: ‚úÖ</li>
                            </ul>
                            <p><strong>üéØ –í–´–í–û–î: API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100%!</strong></p>
                            <p><strong>üîç –ü—Ä–æ–±–ª–µ–º–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (index.html)!</strong></p>
                            <p>–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å JavaScript –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∞—à–µ–π –ø–∞–Ω–µ–ª–∏.</p>
                        </div>
                    `;
                log('‚úÖ –ü–û–õ–ù–´–ô –£–°–ü–ï–•! –ü—Ä–æ–±–ª–µ–º–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ', 'success');
            } else {
                resultDiv.innerHTML = `
                        <div class="error">
                            <h3>‚ùå –ü–†–û–ë–õ–ï–ú–ê –û–ë–ù–ê–†–£–ñ–ï–ù–ê!</h3>
                            <p>–ò–∑–¥–µ–ª–∏–µ –ù–ï —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å:</p>
                            <ul style="text-align: left;">
                                <li>–í selected_products: ${foundInSelected ? '‚úÖ' : '‚ùå'}</li>
                                <li>–í custom_products: ${foundInCustom ? '‚úÖ' : '‚ùå'}</li>
                            </ul>
                            <p><strong>–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏!</strong></p>
                        </div>
                    `;
                log('‚ùå –ò–∑–¥–µ–ª–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å', 'error');
            }

        } catch (error) {
            resultDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            log('‚ùå –û—à–∏–±–∫–∞: ' + error.message, 'error');
        }
    }

    log('üî• –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∞–º!', 'success');
</script>
</body>
</html>